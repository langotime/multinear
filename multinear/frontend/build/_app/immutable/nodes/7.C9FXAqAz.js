var Ws=Object.defineProperty;var Xs=(u,e,t)=>e in u?Ws(u,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[e]=t;var q=(u,e,t)=>Xs(u,typeof e!="symbol"?e+"":e,t);import{j as ns,k as Vs,s as Rt,a as f,t as y,c as Be,f as Mt,d as he,e as O,b as B}from"../chunks/disclose-version.BjBLbfIf.js";import{i as nt}from"../chunks/legacy.b-VaXUeO.js";import{L as Ys,h as rs,Q as as,O as Ks,Y as is,an as en,ao as tn,ap as sn,W as nn,aq as rn,aj as an,ak as ln,al as on,p as rt,l as ae,b as Tt,t as z,a as at,d as G,g as l,m as se,f as H,c as p,r as h,Z as ls,s as g,u as et,n as U,q as ue,ar as cn,ah as dn}from"../chunks/index-client.BoCi2Vgn.js";import{l as Ae,p as ee,b as Ft,i as A,s as Gt}from"../chunks/props.Cy3ILhV4.js";import{o as un,m as os,g as jt,h as hn,j as cs,k as ds,l as pn,q as fn,r as gn,n as Rs,d as Ht,s as $t,B as Ze,p as us,f as hs,e as tt,i as st,a as ps}from"../chunks/index.CW1sqyse.js";import{s as kt}from"../chunks/class.CemJQFJe.js";import{E as fs,C as gs,a as vn,c as mn}from"../chunks/ErrorDisplay.mW8LkjHe.js";import{t as xn,o as bn,c as kn,r as _n,g as $n,a as wn,i as Ts,L as Nt,I as yn,C as Sn,T as Rn,b as Tn,d as Ot,e as Le,f as Pn,h as ze}from"../chunks/TimeAgo.BgKCXkz9.js";import{I as Cn,a as zn}from"../chunks/index.CbYL5kad.js";import{f as An}from"../chunks/projects.C_-bKb6m.js";import{S as In,f as En,g as Ln,t as Bn,a as qn}from"../chunks/tasks.B7ptN-j9.js";import{g as vs}from"../chunks/entry.Cr83aM1g.js";import{L as Dn}from"../chunks/Loading.DKvNWc97.js";import{S as ms}from"../chunks/StatusBadge.D8Nlu6NL.js";import{P as jn,b as Nn}from"../chunks/jobs.C3wkuFnr.js";import{w as On}from"../chunks/index.CZPF9jM2.js";import"../chunks/index.DVVY-nSG.js";import{i as Mn,f as Zn}from"../chunks/intervalToDuration.BpIG60gY.js";function xs(u,e,t,s,n){var r=u,i="",a;Ys(()=>{if(i===(i=e()??"")){rs&&as();return}a!==void 0&&(an(a),a=void 0),i!==""&&(a=Ks(()=>{if(rs){is.data;for(var d=as(),c=d;d!==null&&(d.nodeType!==8||d.data!=="");)c=d,d=en(d);if(d===null)throw tn(),sn;ns(is,c),r=nn(d);return}var o=i+"",x=Vs(o);ns(rn(x),x.lastChild),r.before(x)}))})}const Fn={defaultChecked:!1,disabled:!1,required:!1,name:"",value:""},{name:bs}=fn("switch");function Gn(u){const e={...Fn,...u},t=xn(un(e,"checked")),{disabled:s,required:n,name:r,value:i}=t,a=e.checked??On(e.defaultChecked),d=bn(a,e==null?void 0:e.onCheckedChange);function c(){s.get()||d.update(v=>!v)}const o=os(bs(),{stores:[d,s,n],returned:([v,b,k])=>({"data-disabled":jt(b),disabled:jt(b),"data-state":v?"checked":"unchecked",type:"button",role:"switch","aria-checked":v?"true":"false","aria-required":k?"true":void 0}),action(v){return{destroy:hn(cs(v,"click",()=>{c()}),cs(v,"keydown",k=>{k.key!==ds.ENTER&&k.key!==ds.SPACE||(k.preventDefault(),c())}))}}}),x=os(bs("input"),{stores:[d,r,n,s,i],returned:([v,b,k,_,S])=>({type:"checkbox","aria-hidden":!0,hidden:!0,tabindex:-1,name:b,value:S,checked:v,required:k,disabled:jt(_),style:pn({position:"absolute",opacity:0,"pointer-events":"none",margin:0,transform:"translateX(-100%)"})})});return{elements:{root:o,input:x},states:{checked:d},options:t}}function Ps(){return{NAME:"switch",PARTS:["root","input","thumb"]}}function Hn(u){const{NAME:e,PARTS:t}=Ps(),s=kn(e,t),n={...Gn(_n(u)),getAttrs:s};return ln(e,n),{...n,updateOption:$n(n.options)}}function Cs(){const{NAME:u}=Ps();return on(u)}var Qn=y("<input>");function Jn(u,e){const t=Ae(e,["children","$$slots","$$events","$$legacy"]),s=Ae(t,["el"]);rt(e,!1);const n=Rt(),r=()=>Be(b,"$value",n),i=()=>Be(v,"$input",n),a=()=>Be(k,"$name",n),d=()=>Be(_,"$disabled",n),c=()=>Be(S,"$required",n),o=se();let x=ee(e,"el",28,()=>{});const{elements:{input:v},options:{value:b,name:k,disabled:_,required:S}}=Cs();ae(()=>r(),()=>{G(o,r()===void 0||r()===""?"on":r())}),Tt(),nt();var K=Qn();gn(K);let ie;Ft(K,re=>x(re),()=>x()),Rs(K,re=>i().action(re)),z(()=>ie=Ht(K,ie,{...i(),name:a(),disabled:d(),required:c(),value:l(o),...s})),f(u,K),at()}var Un=y("<button><!></button>"),Wn=y("<!> <!>",1);function Xn(u,e){const t=Ae(e,["children","$$slots","$$events","$$legacy"]),s=Ae(t,["checked","onCheckedChange","disabled","name","value","includeInput","required","asChild","inputAttrs","el"]);rt(e,!1);const n=Rt(),r=()=>Be(ie,"$root",n),i=se(),a=se();let d=ee(e,"checked",28,()=>{}),c=ee(e,"onCheckedChange",24,()=>{}),o=ee(e,"disabled",24,()=>{}),x=ee(e,"name",24,()=>{}),v=ee(e,"value",24,()=>{}),b=ee(e,"includeInput",8,!0),k=ee(e,"required",24,()=>{}),_=ee(e,"asChild",8,!1),S=ee(e,"inputAttrs",24,()=>{}),K=ee(e,"el",28,()=>{});const{elements:{root:ie},states:{checked:re},updateOption:me,getAttrs:Ie}=Hn({disabled:o(),name:x(),value:v(),required:k(),defaultChecked:d(),onCheckedChange:({next:oe})=>{var $;return d()!==oe&&(($=c())==null||$(oe),d(oe)),oe}}),He=wn();ae(()=>et(d()),()=>{d()!==void 0&&re.set(d())}),ae(()=>et(o()),()=>{me("disabled",o())}),ae(()=>et(x()),()=>{me("name",x())}),ae(()=>et(v()),()=>{me("value",v())}),ae(()=>et(k()),()=>{me("required",k())}),ae(()=>r(),()=>{G(i,r())}),ae(()=>et(d()),()=>{G(a,{...Ie("root"),"data-checked":d()?"":void 0})}),ae(()=>(l(i),l(a)),()=>{Object.assign(l(i),l(a))}),Tt(),nt();var xe=Wn(),le=H(xe);A(le,_,oe=>{var $=he(),Q=H($);$t(Q,e,"default",{get builder(){return l(i)}},null),f(oe,$)},oe=>{var $=Un();let Q;var ge=p($);$t(ge,e,"default",{get builder(){return l(i)}},null),h($),Ft($,qe=>K(qe),()=>K()),Rs($,qe=>l(i).action(qe)),ls(()=>Mt("m-click",$,He)),ls(()=>Mt("m-keydown",$,He)),z(()=>Q=Ht($,Q,{...l(i),type:"button",...s})),f(oe,$)});var mt=g(le,2);A(mt,b,oe=>{Jn(oe,Gt(S))}),f(u,xe),at()}var Vn=y("<span></span>");function Yn(u,e){const t=Ae(e,["children","$$slots","$$events","$$legacy"]),s=Ae(t,["asChild","el"]);rt(e,!1);const n=Rt(),r=()=>Be(c,"$checked",n),i=se();let a=ee(e,"asChild",8,!1),d=ee(e,"el",28,()=>{});const{states:{checked:c},getAttrs:o}=Cs();ae(()=>r(),()=>{G(i,{...o("thumb"),"data-state":r()?"checked":"unchecked","data-checked":r()?"":void 0})}),Tt(),nt();var x=he(),v=H(x);A(v,a,b=>{var k=he(),_=H(k);$t(_,e,"default",{get attrs(){return l(i)},get checked(){return r()}},null),f(b,k)},b=>{var k=Vn();let _;Ft(k,S=>d(S),()=>d()),z(()=>_=Ht(k,_,{...s,...l(i)})),f(b,k)}),f(u,x),at()}function Kn(u,e){const t=Ae(e,["children","$$slots","$$events","$$legacy"]);Cn(u,Gt({name:"chevron-right"},()=>t,{iconNode:[["path",{d:"m9 18 6-6-6-6"}]],children:(n,r)=>{var i=he(),a=H(i);$t(a,e,"default",{},null),f(n,i)},$$slots:{default:!0}}))}var er=y('<span class="text-xl text-gray-500"><!></span>'),tr=y('<div class="flex gap-4 items-center"><div class="flex gap-2 items-center"><span class="text-sm text-gray-500">Project</span> <span class="text-md text-gray-800"> </span></div> <!></div>'),sr=y('<div class="flex gap-2 items-center"><span class="text-sm text-gray-500">Project</span> <span class="text-md text-gray-800"> </span></div>'),nr=y('<div class="flex justify-between items-center mb-4"><div class="flex gap-12 items-center"><h1 class="text-3xl font-bold"> </h1> <!></div> <!></div>');function rr(u,e){rt(e,!1);let t=ee(e,"runDetails",8),s=ee(e,"showExportButton",8,!0);nt();var n=he(),r=H(n);A(r,t,i=>{var a=nr(),d=p(a),c=p(d),o=p(c);z(()=>B(o,`Run: ${t().id.slice(-8)??""}`)),h(c);var x=g(c,2);A(x,t,b=>{var k=er(),_=p(k);Ts(_,{get date(){return t().date}}),h(k),f(b,k)}),h(d);var v=g(d,2);A(v,s,b=>{var k=tr(),_=p(k),S=g(p(_),2),K=p(S,!0);h(S),h(_);var ie=g(_,2);Ze(ie,{variant:"outline",class:"text-sm",$$events:{click:()=>{const re=`/export/run#${t().project.id}/${t().id}`;window.open(re,"_blank")}},children:(re,me)=>{U();var Ie=O("Export");f(re,Ie)},$$slots:{default:!0}}),h(k),z(()=>B(K,t().project.name)),f(b,k)},b=>{var k=sr(),_=g(p(k),2),S=p(_,!0);h(_),h(k),z(()=>B(S,t().project.name)),f(b,k)}),h(a),f(i,a)}),f(u,n),at()}function Qt(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Ge=Qt();function zs(u){Ge=u}const ft={exec:()=>null};function E(u,e=""){let t=typeof u=="string"?u:u.source;const s={replace:(n,r)=>{let i=typeof r=="string"?r:r.source;return i=i.replace(ne.caret,"$1"),t=t.replace(n,i),s},getRegex:()=>new RegExp(t,e)};return s}const ne={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:u=>new RegExp(`^( {0,3}${u})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:u=>new RegExp(`^ {0,${Math.min(3,u-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:u=>new RegExp(`^ {0,${Math.min(3,u-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:u=>new RegExp(`^ {0,${Math.min(3,u-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:u=>new RegExp(`^ {0,${Math.min(3,u-1)}}#`),htmlBeginRegex:u=>new RegExp(`^ {0,${Math.min(3,u-1)}}<(?:[a-z].*>|!--)`,"i")},ar=/^(?:[ \t]*(?:\n|$))+/,ir=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,lr=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,vt=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,or=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,As=/(?:[*+-]|\d{1,9}[.)])/,Is=E(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,As).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Jt=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,cr=/^[^\n]+/,Ut=/(?!\s*\])(?:\\.|[^\[\]\\])+/,dr=E(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Ut).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ur=E(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,As).getRegex(),Pt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Wt=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,hr=E("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",Wt).replace("tag",Pt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Es=E(Jt).replace("hr",vt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Pt).getRegex(),pr=E(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Es).getRegex(),Xt={blockquote:pr,code:ir,def:dr,fences:lr,heading:or,hr:vt,html:hr,lheading:Is,list:ur,newline:ar,paragraph:Es,table:ft,text:cr},ks=E("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",vt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Pt).getRegex(),fr={...Xt,table:ks,paragraph:E(Jt).replace("hr",vt).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ks).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Pt).getRegex()},gr={...Xt,html:E(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Wt).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ft,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:E(Jt).replace("hr",vt).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Is).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},vr=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,mr=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ls=/^( {2,}|\\)\n(?!\s*$)/,xr=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ct=/[\p{P}\p{S}]/u,Vt=/[\s\p{P}\p{S}]/u,Bs=/[^\s\p{P}\p{S}]/u,br=E(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Vt).getRegex(),qs=/(?!~)[\p{P}\p{S}]/u,kr=/(?!~)[\s\p{P}\p{S}]/u,_r=/(?:[^\s\p{P}\p{S}]|~)/u,$r=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,Ds=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,wr=E(Ds,"u").replace(/punct/g,Ct).getRegex(),yr=E(Ds,"u").replace(/punct/g,qs).getRegex(),js="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Sr=E(js,"gu").replace(/notPunctSpace/g,Bs).replace(/punctSpace/g,Vt).replace(/punct/g,Ct).getRegex(),Rr=E(js,"gu").replace(/notPunctSpace/g,_r).replace(/punctSpace/g,kr).replace(/punct/g,qs).getRegex(),Tr=E("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Bs).replace(/punctSpace/g,Vt).replace(/punct/g,Ct).getRegex(),Pr=E(/\\(punct)/,"gu").replace(/punct/g,Ct).getRegex(),Cr=E(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),zr=E(Wt).replace("(?:-->|$)","-->").getRegex(),Ar=E("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",zr).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),wt=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Ir=E(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",wt).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ns=E(/^!?\[(label)\]\[(ref)\]/).replace("label",wt).replace("ref",Ut).getRegex(),Os=E(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ut).getRegex(),Er=E("reflink|nolink(?!\\()","g").replace("reflink",Ns).replace("nolink",Os).getRegex(),Yt={_backpedal:ft,anyPunctuation:Pr,autolink:Cr,blockSkip:$r,br:Ls,code:mr,del:ft,emStrongLDelim:wr,emStrongRDelimAst:Sr,emStrongRDelimUnd:Tr,escape:vr,link:Ir,nolink:Os,punctuation:br,reflink:Ns,reflinkSearch:Er,tag:Ar,text:xr,url:ft},Lr={...Yt,link:E(/^!?\[(label)\]\((.*?)\)/).replace("label",wt).getRegex(),reflink:E(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",wt).getRegex()},Zt={...Yt,emStrongRDelimAst:Rr,emStrongLDelim:yr,url:E(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Br={...Zt,br:E(Ls).replace("{2,}","*").getRegex(),text:E(Zt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},_t={normal:Xt,gfm:fr,pedantic:gr},ht={normal:Yt,gfm:Zt,breaks:Br,pedantic:Lr},qr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},_s=u=>qr[u];function Te(u,e){if(e){if(ne.escapeTest.test(u))return u.replace(ne.escapeReplace,_s)}else if(ne.escapeTestNoEncode.test(u))return u.replace(ne.escapeReplaceNoEncode,_s);return u}function $s(u){try{u=encodeURI(u).replace(ne.percentDecode,"%")}catch{return null}return u}function ws(u,e){var r;const t=u.replace(ne.findPipe,(i,a,d)=>{let c=!1,o=a;for(;--o>=0&&d[o]==="\\";)c=!c;return c?"|":" |"}),s=t.split(ne.splitPipe);let n=0;if(s[0].trim()||s.shift(),s.length>0&&!((r=s.at(-1))!=null&&r.trim())&&s.pop(),e)if(s.length>e)s.splice(e);else for(;s.length<e;)s.push("");for(;n<s.length;n++)s[n]=s[n].trim().replace(ne.slashPipe,"|");return s}function pt(u,e,t){const s=u.length;if(s===0)return"";let n=0;for(;n<s&&u.charAt(s-n-1)===e;)n++;return u.slice(0,s-n)}function Dr(u,e){if(u.indexOf(e[1])===-1)return-1;let t=0;for(let s=0;s<u.length;s++)if(u[s]==="\\")s++;else if(u[s]===e[0])t++;else if(u[s]===e[1]&&(t--,t<0))return s;return-1}function ys(u,e,t,s,n){const r=e.href,i=e.title||null,a=u[1].replace(n.other.outputLinkReplace,"$1");if(u[0].charAt(0)!=="!"){s.state.inLink=!0;const d={type:"link",raw:t,href:r,title:i,text:a,tokens:s.inlineTokens(a)};return s.state.inLink=!1,d}return{type:"image",raw:t,href:r,title:i,text:a}}function jr(u,e,t){const s=u.match(t.other.indentCodeCompensation);if(s===null)return e;const n=s[1];return e.split(`
`).map(r=>{const i=r.match(t.other.beginningSpace);if(i===null)return r;const[a]=i;return a.length>=n.length?r.slice(n.length):r}).join(`
`)}class yt{constructor(e){q(this,"options");q(this,"rules");q(this,"lexer");this.options=e||Ge}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const s=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?s:pt(s,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const s=t[0],n=jr(s,t[3]||"",this.rules);return{type:"code",raw:s,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let s=t[2].trim();if(this.rules.other.endingHash.test(s)){const n=pt(s,"#");(this.options.pedantic||!n||this.rules.other.endingSpaceChar.test(n))&&(s=n.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:s,tokens:this.lexer.inline(s)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:pt(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let s=pt(t[0],`
`).split(`
`),n="",r="";const i=[];for(;s.length>0;){let a=!1;const d=[];let c;for(c=0;c<s.length;c++)if(this.rules.other.blockquoteStart.test(s[c]))d.push(s[c]),a=!0;else if(!a)d.push(s[c]);else break;s=s.slice(c);const o=d.join(`
`),x=o.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}
${o}`:o,r=r?`${r}
${x}`:x;const v=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(x,i,!0),this.lexer.state.top=v,s.length===0)break;const b=i.at(-1);if((b==null?void 0:b.type)==="code")break;if((b==null?void 0:b.type)==="blockquote"){const k=b,_=k.raw+`
`+s.join(`
`),S=this.blockquote(_);i[i.length-1]=S,n=n.substring(0,n.length-k.raw.length)+S.raw,r=r.substring(0,r.length-k.text.length)+S.text;break}else if((b==null?void 0:b.type)==="list"){const k=b,_=k.raw+`
`+s.join(`
`),S=this.list(_);i[i.length-1]=S,n=n.substring(0,n.length-b.raw.length)+S.raw,r=r.substring(0,r.length-k.raw.length)+S.raw,s=_.substring(i.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:n,tokens:i,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let s=t[1].trim();const n=s.length>1,r={type:"list",raw:"",ordered:n,start:n?+s.slice(0,-1):"",loose:!1,items:[]};s=n?`\\d{1,9}\\${s.slice(-1)}`:`\\${s}`,this.options.pedantic&&(s=n?s:"[*+-]");const i=this.rules.other.listItemRegex(s);let a=!1;for(;e;){let c=!1,o="",x="";if(!(t=i.exec(e))||this.rules.block.hr.test(e))break;o=t[0],e=e.substring(o.length);let v=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,ie=>" ".repeat(3*ie.length)),b=e.split(`
`,1)[0],k=!v.trim(),_=0;if(this.options.pedantic?(_=2,x=v.trimStart()):k?_=t[1].length+1:(_=t[2].search(this.rules.other.nonSpaceChar),_=_>4?1:_,x=v.slice(_),_+=t[1].length),k&&this.rules.other.blankLine.test(b)&&(o+=b+`
`,e=e.substring(b.length+1),c=!0),!c){const ie=this.rules.other.nextBulletRegex(_),re=this.rules.other.hrRegex(_),me=this.rules.other.fencesBeginRegex(_),Ie=this.rules.other.headingBeginRegex(_),He=this.rules.other.htmlBeginRegex(_);for(;e;){const xe=e.split(`
`,1)[0];let le;if(b=xe,this.options.pedantic?(b=b.replace(this.rules.other.listReplaceNesting,"  "),le=b):le=b.replace(this.rules.other.tabCharGlobal,"    "),me.test(b)||Ie.test(b)||He.test(b)||ie.test(b)||re.test(b))break;if(le.search(this.rules.other.nonSpaceChar)>=_||!b.trim())x+=`
`+le.slice(_);else{if(k||v.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||me.test(v)||Ie.test(v)||re.test(v))break;x+=`
`+b}!k&&!b.trim()&&(k=!0),o+=xe+`
`,e=e.substring(xe.length+1),v=le.slice(_)}}r.loose||(a?r.loose=!0:this.rules.other.doubleBlankLine.test(o)&&(a=!0));let S=null,K;this.options.gfm&&(S=this.rules.other.listIsTask.exec(x),S&&(K=S[0]!=="[ ] ",x=x.replace(this.rules.other.listReplaceTask,""))),r.items.push({type:"list_item",raw:o,task:!!S,checked:K,loose:!1,text:x,tokens:[]}),r.raw+=o}const d=r.items.at(-1);if(d)d.raw=d.raw.trimEnd(),d.text=d.text.trimEnd();else return;r.raw=r.raw.trimEnd();for(let c=0;c<r.items.length;c++)if(this.lexer.state.top=!1,r.items[c].tokens=this.lexer.blockTokens(r.items[c].text,[]),!r.loose){const o=r.items[c].tokens.filter(v=>v.type==="space"),x=o.length>0&&o.some(v=>this.rules.other.anyLine.test(v.raw));r.loose=x}if(r.loose)for(let c=0;c<r.items.length;c++)r.items[c].loose=!0;return r}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const s=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:s,raw:t[0],href:n,title:r}}}table(e){var a;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const s=ws(t[1]),n=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=(a=t[3])!=null&&a.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],i={type:"table",raw:t[0],header:[],align:[],rows:[]};if(s.length===n.length){for(const d of n)this.rules.other.tableAlignRight.test(d)?i.align.push("right"):this.rules.other.tableAlignCenter.test(d)?i.align.push("center"):this.rules.other.tableAlignLeft.test(d)?i.align.push("left"):i.align.push(null);for(let d=0;d<s.length;d++)i.header.push({text:s[d],tokens:this.lexer.inline(s[d]),header:!0,align:i.align[d]});for(const d of r)i.rows.push(ws(d,i.header.length).map((c,o)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:i.align[o]})));return i}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const s=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:s,tokens:this.lexer.inline(s)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const s=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(s)){if(!this.rules.other.endAngleBracket.test(s))return;const i=pt(s.slice(0,-1),"\\");if((s.length-i.length)%2===0)return}else{const i=Dr(t[2],"()");if(i>-1){const d=(t[0].indexOf("!")===0?5:4)+t[1].length+i;t[2]=t[2].substring(0,i),t[0]=t[0].substring(0,d).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){const i=this.rules.other.pedanticHrefTitle.exec(n);i&&(n=i[1],r=i[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(s)?n=n.slice(1):n=n.slice(1,-1)),ys(t,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let s;if((s=this.rules.inline.reflink.exec(e))||(s=this.rules.inline.nolink.exec(e))){const n=(s[2]||s[1]).replace(this.rules.other.multipleSpaceGlobal," "),r=t[n.toLowerCase()];if(!r){const i=s[0].charAt(0);return{type:"text",raw:i,text:i}}return ys(s,r,s[0],this.lexer,this.rules)}}emStrong(e,t,s=""){let n=this.rules.inline.emStrongLDelim.exec(e);if(!n||n[3]&&s.match(this.rules.other.unicodeAlphaNumeric))return;if(!(n[1]||n[2]||"")||!s||this.rules.inline.punctuation.exec(s)){const i=[...n[0]].length-1;let a,d,c=i,o=0;const x=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(x.lastIndex=0,t=t.slice(-1*e.length+i);(n=x.exec(t))!=null;){if(a=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!a)continue;if(d=[...a].length,n[3]||n[4]){c+=d;continue}else if((n[5]||n[6])&&i%3&&!((i+d)%3)){o+=d;continue}if(c-=d,c>0)continue;d=Math.min(d,d+c+o);const v=[...n[0]][0].length,b=e.slice(0,i+n.index+v+d);if(Math.min(i,d)%2){const _=b.slice(1,-1);return{type:"em",raw:b,text:_,tokens:this.lexer.inlineTokens(_)}}const k=b.slice(2,-2);return{type:"strong",raw:b,text:k,tokens:this.lexer.inlineTokens(k)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let s=t[2].replace(this.rules.other.newLineCharGlobal," ");const n=this.rules.other.nonSpaceChar.test(s),r=this.rules.other.startingSpaceChar.test(s)&&this.rules.other.endingSpaceChar.test(s);return n&&r&&(s=s.substring(1,s.length-1)),{type:"codespan",raw:t[0],text:s}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let s,n;return t[2]==="@"?(s=t[1],n="mailto:"+s):(s=t[1],n=s),{type:"link",raw:t[0],text:s,href:n,tokens:[{type:"text",raw:s,text:s}]}}}url(e){var s;let t;if(t=this.rules.inline.url.exec(e)){let n,r;if(t[2]==="@")n=t[0],r="mailto:"+n;else{let i;do i=t[0],t[0]=((s=this.rules.inline._backpedal.exec(t[0]))==null?void 0:s[0])??"";while(i!==t[0]);n=t[0],t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const s=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:s}}}}class pe{constructor(e){q(this,"tokens");q(this,"options");q(this,"state");q(this,"tokenizer");q(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ge,this.options.tokenizer=this.options.tokenizer||new yt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:ne,block:_t.normal,inline:ht.normal};this.options.pedantic?(t.block=_t.pedantic,t.inline=ht.pedantic):this.options.gfm&&(t.block=_t.gfm,this.options.breaks?t.inline=ht.breaks:t.inline=ht.gfm),this.tokenizer.rules=t}static get rules(){return{block:_t,inline:ht}}static lex(e,t){return new pe(t).lex(e)}static lexInline(e,t){return new pe(t).inlineTokens(e)}lex(e){e=e.replace(ne.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const s=this.inlineQueue[t];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],s=!1){var n,r,i;for(this.options.pedantic&&(e=e.replace(ne.tabCharGlobal,"    ").replace(ne.spaceLine,""));e;){let a;if((r=(n=this.options.extensions)==null?void 0:n.block)!=null&&r.some(c=>(a=c.call({lexer:this},e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const c=t.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:t.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const c=t.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):t.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const c=t.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),t.push(a);continue}let d=e;if((i=this.options.extensions)!=null&&i.startBlock){let c=1/0;const o=e.slice(1);let x;this.options.extensions.startBlock.forEach(v=>{x=v.call({lexer:this},o),typeof x=="number"&&x>=0&&(c=Math.min(c,x))}),c<1/0&&c>=0&&(d=e.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(d))){const c=t.at(-1);s&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):t.push(a),s=d.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const c=t.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):t.push(a);continue}if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var a,d,c;let s=e,n=null;if(this.tokens.links){const o=Object.keys(this.tokens.links);if(o.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)o.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,n.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let r=!1,i="";for(;e;){r||(i=""),r=!1;let o;if((d=(a=this.options.extensions)==null?void 0:a.inline)!=null&&d.some(v=>(o=v.call({lexer:this},e,t))?(e=e.substring(o.raw.length),t.push(o),!0):!1))continue;if(o=this.tokenizer.escape(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.tag(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.link(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(o.raw.length);const v=t.at(-1);o.type==="text"&&(v==null?void 0:v.type)==="text"?(v.raw+=o.raw,v.text+=o.text):t.push(o);continue}if(o=this.tokenizer.emStrong(e,s,i)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.codespan(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.br(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.del(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.autolink(e)){e=e.substring(o.raw.length),t.push(o);continue}if(!this.state.inLink&&(o=this.tokenizer.url(e))){e=e.substring(o.raw.length),t.push(o);continue}let x=e;if((c=this.options.extensions)!=null&&c.startInline){let v=1/0;const b=e.slice(1);let k;this.options.extensions.startInline.forEach(_=>{k=_.call({lexer:this},b),typeof k=="number"&&k>=0&&(v=Math.min(v,k))}),v<1/0&&v>=0&&(x=e.substring(0,v+1))}if(o=this.tokenizer.inlineText(x)){e=e.substring(o.raw.length),o.raw.slice(-1)!=="_"&&(i=o.raw.slice(-1)),r=!0;const v=t.at(-1);(v==null?void 0:v.type)==="text"?(v.raw+=o.raw,v.text+=o.text):t.push(o);continue}if(e){const v="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(v);break}else throw new Error(v)}}return t}}class St{constructor(e){q(this,"options");q(this,"parser");this.options=e||Ge}space(e){return""}code({text:e,lang:t,escaped:s}){var i;const n=(i=(t||"").match(ne.notSpaceStart))==null?void 0:i[0],r=e.replace(ne.endingNewline,"")+`
`;return n?'<pre><code class="language-'+Te(n)+'">'+(s?r:Te(r,!0))+`</code></pre>
`:"<pre><code>"+(s?r:Te(r,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,s=e.start;let n="";for(let a=0;a<e.items.length;a++){const d=e.items[a];n+=this.listitem(d)}const r=t?"ol":"ul",i=t&&s!==1?' start="'+s+'"':"";return"<"+r+i+`>
`+n+"</"+r+`>
`}listitem(e){var s;let t="";if(e.task){const n=this.checkbox({checked:!!e.checked});e.loose?((s=e.tokens[0])==null?void 0:s.type)==="paragraph"?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=n+" "+Te(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",s="";for(let r=0;r<e.header.length;r++)s+=this.tablecell(e.header[r]);t+=this.tablerow({text:s});let n="";for(let r=0;r<e.rows.length;r++){const i=e.rows[r];s="";for(let a=0;a<i.length;a++)s+=this.tablecell(i[a]);n+=this.tablerow({text:s})}return n&&(n=`<tbody>${n}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+n+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),s=e.header?"th":"td";return(e.align?`<${s} align="${e.align}">`:`<${s}>`)+t+`</${s}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${Te(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:s}){const n=this.parser.parseInline(s),r=$s(e);if(r===null)return n;e=r;let i='<a href="'+e+'"';return t&&(i+=' title="'+Te(t)+'"'),i+=">"+n+"</a>",i}image({href:e,title:t,text:s}){const n=$s(e);if(n===null)return Te(s);e=n;let r=`<img src="${e}" alt="${s}"`;return t&&(r+=` title="${Te(t)}"`),r+=">",r}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:Te(e.text)}}class Kt{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class fe{constructor(e){q(this,"options");q(this,"renderer");q(this,"textRenderer");this.options=e||Ge,this.options.renderer=this.options.renderer||new St,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Kt}static parse(e,t){return new fe(t).parse(e)}static parseInline(e,t){return new fe(t).parseInline(e)}parse(e,t=!0){var n,r;let s="";for(let i=0;i<e.length;i++){const a=e[i];if((r=(n=this.options.extensions)==null?void 0:n.renderers)!=null&&r[a.type]){const c=a,o=this.options.extensions.renderers[c.type].call({parser:this},c);if(o!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){s+=o||"";continue}}const d=a;switch(d.type){case"space":{s+=this.renderer.space(d);continue}case"hr":{s+=this.renderer.hr(d);continue}case"heading":{s+=this.renderer.heading(d);continue}case"code":{s+=this.renderer.code(d);continue}case"table":{s+=this.renderer.table(d);continue}case"blockquote":{s+=this.renderer.blockquote(d);continue}case"list":{s+=this.renderer.list(d);continue}case"html":{s+=this.renderer.html(d);continue}case"paragraph":{s+=this.renderer.paragraph(d);continue}case"text":{let c=d,o=this.renderer.text(c);for(;i+1<e.length&&e[i+1].type==="text";)c=e[++i],o+=`
`+this.renderer.text(c);t?s+=this.renderer.paragraph({type:"paragraph",raw:o,text:o,tokens:[{type:"text",raw:o,text:o,escaped:!0}]}):s+=o;continue}default:{const c='Token with "'+d.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return s}parseInline(e,t=this.renderer){var n,r;let s="";for(let i=0;i<e.length;i++){const a=e[i];if((r=(n=this.options.extensions)==null?void 0:n.renderers)!=null&&r[a.type]){const c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){s+=c||"";continue}}const d=a;switch(d.type){case"escape":{s+=t.text(d);break}case"html":{s+=t.html(d);break}case"link":{s+=t.link(d);break}case"image":{s+=t.image(d);break}case"strong":{s+=t.strong(d);break}case"em":{s+=t.em(d);break}case"codespan":{s+=t.codespan(d);break}case"br":{s+=t.br(d);break}case"del":{s+=t.del(d);break}case"text":{s+=t.text(d);break}default:{const c='Token with "'+d.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return s}}class gt{constructor(e){q(this,"options");q(this,"block");this.options=e||Ge}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?pe.lex:pe.lexInline}provideParser(){return this.block?fe.parse:fe.parseInline}}q(gt,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class Nr{constructor(...e){q(this,"defaults",Qt());q(this,"options",this.setOptions);q(this,"parse",this.parseMarkdown(!0));q(this,"parseInline",this.parseMarkdown(!1));q(this,"Parser",fe);q(this,"Renderer",St);q(this,"TextRenderer",Kt);q(this,"Lexer",pe);q(this,"Tokenizer",yt);q(this,"Hooks",gt);this.use(...e)}walkTokens(e,t){var n,r;let s=[];for(const i of e)switch(s=s.concat(t.call(this,i)),i.type){case"table":{const a=i;for(const d of a.header)s=s.concat(this.walkTokens(d.tokens,t));for(const d of a.rows)for(const c of d)s=s.concat(this.walkTokens(c.tokens,t));break}case"list":{const a=i;s=s.concat(this.walkTokens(a.items,t));break}default:{const a=i;(r=(n=this.defaults.extensions)==null?void 0:n.childTokens)!=null&&r[a.type]?this.defaults.extensions.childTokens[a.type].forEach(d=>{const c=a[d].flat(1/0);s=s.concat(this.walkTokens(c,t))}):a.tokens&&(s=s.concat(this.walkTokens(a.tokens,t)))}}return s}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(s=>{const n={...s};if(n.async=this.defaults.async||n.async||!1,s.extensions&&(s.extensions.forEach(r=>{if(!r.name)throw new Error("extension name required");if("renderer"in r){const i=t.renderers[r.name];i?t.renderers[r.name]=function(...a){let d=r.renderer.apply(this,a);return d===!1&&(d=i.apply(this,a)),d}:t.renderers[r.name]=r.renderer}if("tokenizer"in r){if(!r.level||r.level!=="block"&&r.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const i=t[r.level];i?i.unshift(r.tokenizer):t[r.level]=[r.tokenizer],r.start&&(r.level==="block"?t.startBlock?t.startBlock.push(r.start):t.startBlock=[r.start]:r.level==="inline"&&(t.startInline?t.startInline.push(r.start):t.startInline=[r.start]))}"childTokens"in r&&r.childTokens&&(t.childTokens[r.name]=r.childTokens)}),n.extensions=t),s.renderer){const r=this.defaults.renderer||new St(this.defaults);for(const i in s.renderer){if(!(i in r))throw new Error(`renderer '${i}' does not exist`);if(["options","parser"].includes(i))continue;const a=i,d=s.renderer[a],c=r[a];r[a]=(...o)=>{let x=d.apply(r,o);return x===!1&&(x=c.apply(r,o)),x||""}}n.renderer=r}if(s.tokenizer){const r=this.defaults.tokenizer||new yt(this.defaults);for(const i in s.tokenizer){if(!(i in r))throw new Error(`tokenizer '${i}' does not exist`);if(["options","rules","lexer"].includes(i))continue;const a=i,d=s.tokenizer[a],c=r[a];r[a]=(...o)=>{let x=d.apply(r,o);return x===!1&&(x=c.apply(r,o)),x}}n.tokenizer=r}if(s.hooks){const r=this.defaults.hooks||new gt;for(const i in s.hooks){if(!(i in r))throw new Error(`hook '${i}' does not exist`);if(["options","block"].includes(i))continue;const a=i,d=s.hooks[a],c=r[a];gt.passThroughHooks.has(i)?r[a]=o=>{if(this.defaults.async)return Promise.resolve(d.call(r,o)).then(v=>c.call(r,v));const x=d.call(r,o);return c.call(r,x)}:r[a]=(...o)=>{let x=d.apply(r,o);return x===!1&&(x=c.apply(r,o)),x}}n.hooks=r}if(s.walkTokens){const r=this.defaults.walkTokens,i=s.walkTokens;n.walkTokens=function(a){let d=[];return d.push(i.call(this,a)),r&&(d=d.concat(r.call(this,a))),d}}this.defaults={...this.defaults,...n}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return pe.lex(e,t??this.defaults)}parser(e,t){return fe.parse(e,t??this.defaults)}parseMarkdown(e){return(s,n)=>{const r={...n},i={...this.defaults,...r},a=this.onError(!!i.silent,!!i.async);if(this.defaults.async===!0&&r.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof s>"u"||s===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof s!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=e);const d=i.hooks?i.hooks.provideLexer():e?pe.lex:pe.lexInline,c=i.hooks?i.hooks.provideParser():e?fe.parse:fe.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(s):s).then(o=>d(o,i)).then(o=>i.hooks?i.hooks.processAllTokens(o):o).then(o=>i.walkTokens?Promise.all(this.walkTokens(o,i.walkTokens)).then(()=>o):o).then(o=>c(o,i)).then(o=>i.hooks?i.hooks.postprocess(o):o).catch(a);try{i.hooks&&(s=i.hooks.preprocess(s));let o=d(s,i);i.hooks&&(o=i.hooks.processAllTokens(o)),i.walkTokens&&this.walkTokens(o,i.walkTokens);let x=c(o,i);return i.hooks&&(x=i.hooks.postprocess(x)),x}catch(o){return a(o)}}}onError(e,t){return s=>{if(s.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const n="<p>An error occurred:</p><pre>"+Te(s.message+"",!0)+"</pre>";return t?Promise.resolve(n):n}if(t)return Promise.reject(s);throw s}}}const Fe=new Nr;function I(u,e){return Fe.parse(u,e)}I.options=I.setOptions=function(u){return Fe.setOptions(u),I.defaults=Fe.defaults,zs(I.defaults),I};I.getDefaults=Qt;I.defaults=Ge;I.use=function(...u){return Fe.use(...u),I.defaults=Fe.defaults,zs(I.defaults),I};I.walkTokens=function(u,e){return Fe.walkTokens(u,e)};I.parseInline=Fe.parseInline;I.Parser=fe;I.parser=fe.parse;I.Renderer=St;I.TextRenderer=Kt;I.Lexer=pe;I.lexer=pe.lex;I.Tokenizer=yt;I.Hooks=gt;I.parse=I;I.options;I.setOptions;I.use;I.walkTokens;I.parseInline;fe.parse;pe.lex;function Ss(u,e){const t=Ae(e,["children","$$slots","$$events","$$legacy"]),s=Ae(t,["class","checked"]);rt(e,!1);let n=ee(e,"class",8,void 0),r=ee(e,"checked",12,void 0);nt();var i=ue(()=>hs("focus-visible:ring-ring focus-visible:ring-offset-background data-[state=checked]:bg-primary data-[state=unchecked]:bg-input peer inline-flex h-[24px] w-[44px] shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n()));Xn(u,Gt({get checked(){return r()},set checked(a){r(a)},get class(){return l(i)}},()=>s,{$$events:{click(a){us.call(this,e,a)},keydown(a){us.call(this,e,a)}},children:(a,d)=>{var c=ue(()=>hs("bg-background pointer-events-none block h-5 w-5 rounded-full shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"));Yn(a,{get class(){return l(c)}})},$$slots:{default:!0},$$legacy:!0})),at()}var Or=y('<div class="mt-4"><!></div>'),Mr=y('<div class="grid grid-cols-2 md:grid-cols-4 gap-4"><div class="space-y-1"><div class="text-sm text-gray-500">Status</div> <div class="font-semibold"><!></div></div> <div class="space-y-1"><div class="text-sm text-gray-500">Total Tasks</div> <div class="font-semibold"> </div></div> <div class="space-y-1"><div class="text-sm text-gray-500">Model</div> <div class="font-semibold"> </div></div> <div class="space-y-1"><!> <!></div></div> <!> <div class="flex gap-8 items-end mt-4"><!></div>',1),Zr=y("<!> <!> <!> <!> <!> <!> <!> <!>",1),Fr=y("<div></div>"),Gr=y("<div></div>"),Hr=y('<div class="w-full bg-gray-200 rounded-sm h-4 dark:bg-gray-700 overflow-hidden flex"><!></div> <div class="text-center text-xs font-medium"> </div>',1),Qr=y("<!> <!> <!> <!> <!> <!> <!> <!>",1),Jr=y('<div><h5 class="text-sm font-semibold mb-2">Input</h5> <div class="bg-white p-4 rounded border border-gray-200 whitespace-pre-wrap font-mono text-xs"> </div></div>'),Ur=y('<div class="markdown-content"><!></div>'),Wr=y('<div class="whitespace-pre-wrap font-mono text-xs"> </div>'),Xr=y('<div><div class="flex justify-between items-center mb-1"><h5 class="text-sm font-semibold">Output</h5> <div class="flex items-center gap-4"><div class="flex items-center space-x-2"><!> <!></div> <!></div></div> <div class="bg-white p-4 rounded border border-gray-200"><!></div></div>'),Vr=y('<div><h5 class="text-sm font-semibold mb-2 text-red-600">Error</h5> <div class="bg-red-50 p-4 rounded border border-red-200 whitespace-pre-wrap font-mono text-xs text-red-700"> </div></div>'),Yr=y('<div><div class="text-sm font-medium text-gray-600 mb-1"> </div> <div class="bg-white p-3 rounded border border-gray-200 whitespace-pre-wrap font-mono text-xs"> </div></div>'),Kr=y('<div><h5 class="text-sm font-semibold mb-2">Details</h5> <div class="grid grid-cols-1 sm:grid-cols-2 gap-3"></div></div>'),ea=y('<div class="markdown-content"><!></div>'),ta=y('<div class="whitespace-pre-wrap font-mono text-xs"> </div>'),sa=y('<div><h5 class="text-sm font-semibold mb-2">Prompt</h5> <details class="bg-white rounded border border-gray-200"><summary class="px-4 py-2 cursor-pointer hover:bg-gray-50 flex justify-between items-center"><span>View Prompt</span> <div class="flex items-center space-x-2"><!> <!></div></summary> <div class="p-4"><!></div></details></div>'),na=y('<tr class="hover:bg-gray-50"><td class="px-4 py-2"><div class="text-xs text-gray-500"> </div> <div class="text-sm"> </div></td><td class="px-4 py-2"> </td></tr>'),ra=y('<div><h5 class="text-sm font-semibold mb-2">Logs</h5> <details class="bg-white rounded border border-gray-200"><summary class="px-4 py-2 cursor-pointer hover:bg-gray-50">View Logs</summary> <table class="w-full text-sm"><thead class="bg-gray-50 border-y border-gray-200"><tr><th class="px-4 py-2 text-left w-32">Info</th><th class="px-4 py-2 text-left">Message</th></tr></thead><tbody class="divide-y divide-gray-100"></tbody></table></details></div>'),aa=y("<!> Re-run",1),ia=y('<div class="flex gap-2"><!> <!> <!></div>'),la=y('<div class="pt-4 first:pt-0"><div class="flex items-center gap-3"><div><span class="text-xs font-medium leading-none"> </span></div> <div class="text-sm font-medium flex-1"> </div></div> <div class="mt-1 text-sm text-gray-600"> </div></div>'),oa=y('<div><div class="flex items-center justify-between mb-3"><h4 class="font-semibold text-lg">Evaluation Results</h4> <!></div> <div class="space-y-4 divide-y divide-gray-100"></div></div>'),ca=y('<div><div class="text-sm font-medium text-gray-600 mb-1"> </div> <div class="bg-white p-3 rounded border border-gray-200 whitespace-pre-wrap font-mono text-xs"> </div></div>'),da=y('<div><h5 class="font-semibold mb-2">Details</h5> <div class="grid grid-cols-1 sm:grid-cols-2 gap-3"></div></div>'),ua=y('<div class="p-4 grid grid-cols-1 md:grid-cols-2 gap-6"><div class="space-y-4 pr-12 border-r border-gray-200"><div class="flex items-center mb-2"><h4 class="font-semibold text-lg">Task Details <span class="text-sm font-normal text-gray-800 ml-2"><!></span></h4></div> <!> <!> <!> <!> <!> <!></div> <div class="space-y-4 pl-4"><div class="flex items-center mb-2"><h4 class="font-semibold text-lg">Evaluation <span class="text-sm font-normal text-gray-800 ml-2"><!></span></h4> <div class="flex items-center gap-4 ml-auto"><div class="text-sm text-gray-800"> </div> <div> </div> <!></div></div> <!> <!></div></div>'),ha=y("<!> <!>",1),pa=y("<!> <!>",1),fa=y('<div class="space-y-6"><!> <!></div>'),ga=y('<div class="text-center text-gray-500">No run found</div>'),va=y('<div class="container mx-auto p-4"><!> <!></div>');function qa(u,e){rt(e,!1);const t=Rt(),s=()=>Be(An,"$selectedRunId",t),n=se(),r=se();let i=null,a=se(null),d=se(!0),c=se(null),o=se(null),x=se(!1),v=se(!1);async function b($){G(d,!0),G(c,null);try{G(a,await zn($))}catch(Q){G(c,Q instanceof Error?Q.message:"Failed to load run details"),console.error(Q)}finally{G(d,!1)}}let k=se(""),_=se(""),S=se("");async function K(){if(!l(o))return;await dn();const $=document.querySelector(`[data-task-id="${l(o)}"]`);$&&$.scrollIntoView({behavior:"smooth",block:"start"})}async function ie(){if(!l(n).length)return;const $=l(o)?l(n).findIndex(ge=>ge.id===l(o)):-1,Q=$<l(n).length-1?$+1:0;G(o,l(n)[Q].id),await K()}async function re(){if(!l(n).length)return;const $=l(o)?l(n).findIndex(ge=>ge.id===l(o)):0,Q=$>0?$-1:l(n).length-1;G(o,l(n)[Q].id),await K()}function me($){$.target instanceof HTMLInputElement||$.target instanceof HTMLTextAreaElement||($.key==="j"?ie():$.key==="k"&&re())}async function Ie(){}async function He($){try{await Nn(l(a).project.id,$.challenge_id,Ie),vs("/")}catch(Q){console.error("Error rerunning task:",Q)}}function xe($,Q){const ge=Mn({start:new Date($),end:new Date(Q)});return ge.minutes||ge.seconds?Zn(ge,{format:["minutes","seconds"]}):"<1 second"}ae(()=>s(),()=>{s()&&b(s())}),ae(()=>(l(a),l(k),l(_)),()=>{var $;G(n,En((($=l(a))==null?void 0:$.tasks)||[],l(k),l(_)))}),ae(()=>l(a),()=>{var $;G(r,Ln((($=l(a))==null?void 0:$.tasks)||[]))}),Tt(),nt();var le=va();Mt("keydown",cn,me);var mt=p(le);A(mt,()=>l(a),$=>{rr($,{get runDetails(){return l(a)},showExportButton:!0})});var oe=g(mt,2);A(oe,()=>l(d),$=>{Dn($,{message:"Loading run details..."})},$=>{var Q=he(),ge=H(Q);A(ge,()=>l(c),qe=>{fs(qe,{get errorMessage(){return l(c)},onRetry:()=>b(i)})},qe=>{var es=he(),Ms=H(es);A(Ms,()=>l(a),zt=>{var it=fa(),ts=p(it);gs(ts,{class:"pb-4",children:(At,Fs)=>{vn(At,{children:(It,Gs)=>{mn(It,{children:(Et,Hs)=>{var lt=Mr(),Qe=H(lt),ot=p(Qe),Je=g(p(ot),2),Lt=p(Je),Ue=ue(()=>{var T;return((T=l(a).details)==null?void 0:T.status)||l(a).status});ms(Lt,{get status(){return l(Ue)}}),h(Je),h(ot);var We=g(ot,2),De=g(p(We),2),m=p(De,!0);h(De),h(We);var Pe=g(We,2),be=g(p(Pe),2),je=p(be,!0);h(be),h(Pe);var Ee=g(Pe,2),Ne=p(Ee);Nt(Ne,{for:"search",children:(T,_e)=>{U();var $e=O("Search");f(T,$e)},$$slots:{default:!0}});var Xe=g(Ne,2);yn(Xe,{id:"search",placeholder:"Search tasks...",get value(){return l(_)},set value(T){G(_,T)},$$legacy:!0}),h(Ee),h(Qe);var ke=g(Qe,2);A(ke,()=>{var T;return(T=l(a).details)==null?void 0:T.error},T=>{var _e=Or(),$e=p(_e);fs($e,{get errorMessage(){return l(a).details.error}}),h(_e),f(T,_e)});var M=g(ke,2),ce=p(M);A(ce,()=>l(a).tasks.length>=5,T=>{In(T,{get statusFilter(){return l(k)},set statusFilter(_e){G(k,_e)},get statusCounts(){return l(r)},get totalCount(){return l(a).tasks.length},$$legacy:!0})}),h(M),z(()=>{B(m,l(a).tasks.length),B(je,l(a).details.model||"N/A")}),f(Et,lt)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}});var Zs=g(ts,2);gs(Zs,{children:(At,Fs)=>{Sn(At,{children:(It,Gs)=>{Rn(It,{class:"-mt-4",children:(Et,Hs)=>{var lt=pa(),Qe=H(lt);Tn(Qe,{children:(Je,Lt)=>{Ot(Je,{children:(Ue,We)=>{var De=Zr(),m=H(De);Le(m,{});var Pe=g(m,2);Le(Pe,{children:(M,ce)=>{U();var T=O("Task ID");f(M,T)},$$slots:{default:!0}});var be=g(Pe,2);Le(be,{children:(M,ce)=>{U();var T=O("Started");f(M,T)},$$slots:{default:!0}});var je=g(be,2);Le(je,{children:(M,ce)=>{U();var T=O("Duration");f(M,T)},$$slots:{default:!0}});var Ee=g(je,2);Le(Ee,{children:(M,ce)=>{U();var T=O("Model");f(M,T)},$$slots:{default:!0}});var Ne=g(Ee,2);Le(Ne,{children:(M,ce)=>{U();var T=O("Input");f(M,T)},$$slots:{default:!0}});var Xe=g(Ne,2);Le(Xe,{children:(M,ce)=>{U();var T=O("Status");f(M,T)},$$slots:{default:!0}});var ke=g(Xe,2);Le(ke,{children:(M,ce)=>{U();var T=O("Score");f(M,T)},$$slots:{default:!0}}),f(Ue,De)},$$slots:{default:!0}})},$$slots:{default:!0}});var ot=g(Qe,2);Pn(ot,{children:(Je,Lt)=>{var Ue=he(),We=H(Ue);tt(We,1,()=>l(n),st,(De,m)=>{var Pe=ha();const be=ue(()=>l(o)===l(m).id),je=ue(()=>{const{isPassed:ke,statusClass:M}=qn(l(m));return{isPassed:ke,statusClass:M}});var Ee=H(Pe),Ne=ue(()=>`cursor-pointer ${l(je).statusClass}`);Ot(Ee,{get"data-task-id"(){return l(m).id},get class(){return l(Ne)},$$events:{click:()=>{G(o,l(be)?null:l(m).id),l(be)&&K()}},children:(ke,M)=>{var ce=Qr(),T=H(ce);ze(T,{class:"w-4",children:(W,we)=>{Ze(W,{variant:"ghost",size:"sm",class:"h-4 w-4 p-0",children:(J,de)=>{var ye=ue(()=>`h-4 w-4 transition-transform duration-200 text-gray-400
                                                ${(l(be)?"rotate-90":"")??""}`);Kn(J,{get class(){return l(ye)}})},$$slots:{default:!0}})},$$slots:{default:!0}});var _e=g(T,2);ze(_e,{class:"font-medium font-mono",children:(W,we)=>{U();var J=O();z(()=>B(J,l(m).id.slice(-8))),f(W,J)},$$slots:{default:!0}});var $e=g(_e,2);ze($e,{children:(W,we)=>{Ts(W,{get date(){return l(m).created_at}})},$$slots:{default:!0}});var Ve=g($e,2);ze(Ve,{children:(W,we)=>{var J=he(),de=H(J);A(de,()=>l(m).finished_at,ye=>{var Ce=O();z(()=>B(Ce,xe(l(m).created_at,l(m).finished_at))),f(ye,Ce)},ye=>{var Ce=O("-");f(ye,Ce)}),f(W,J)},$$slots:{default:!0}});var Ye=g(Ve,2);ze(Ye,{children:(W,we)=>{U();var J=O();z(()=>{var de;return B(J,((de=l(m).task_details)==null?void 0:de.model)||"-")}),f(W,J)},$$slots:{default:!0}});var ct=g(Ye,2);ze(ct,{class:"max-w-xs",children:(W,we)=>{U();var J=O();z(()=>B(J,Bn(l(m).task_input))),f(W,J)},$$slots:{default:!0}});var dt=g(ct,2);ze(dt,{children:(W,we)=>{ms(W,{get status(){return l(m).status}})},$$slots:{default:!0}});var Bt=g(dt,2);ze(Bt,{children:(W,we)=>{var J=Hr(),de=H(J),ye=p(de);A(ye,()=>{var Se;return(Se=l(m).eval_details)==null?void 0:Se.evaluations},Se=>{var Re=he(),Ke=H(Re);tt(Ke,1,()=>l(m).eval_details.evaluations,st,(qt,ut)=>{var Oe=Fr();const Dt=ue(()=>`width: ${(1/l(m).eval_details.evaluations.length*100).toFixed(0)??""}%`);z(()=>{kt(Oe,`h-4 min-w-[5px] ${(l(ut).score>=1?"bg-green-600":l(ut).score>0?"bg-yellow-400":"bg-red-600")??""}`),ps(Oe,"style",l(Dt))}),f(qt,Oe)}),f(Se,Re)},Se=>{var Re=Gr();const Ke=ue(()=>`width: ${(l(m).eval_score*100).toFixed(0)??""}%`);z(()=>{kt(Re,`h-4 min-w-[5px] ${(l(je).isPassed?"bg-green-600":"bg-red-600")??""}`),ps(Re,"style",l(Ke))}),f(Se,Re)}),h(de);var Ce=g(de,2),xt=p(Ce);z(()=>B(xt,`${(l(m).eval_score*100).toFixed(0)??""}%`)),h(Ce),f(W,J)},$$slots:{default:!0}}),f(ke,ce)},$$slots:{default:!0}});var Xe=g(Ee,2);A(Xe,()=>l(be),ke=>{Ot(ke,{class:"bg-gray-50 hover:bg-gray-50",children:(M,ce)=>{ze(M,{colspan:8,class:"border-t border-gray-100",children:(T,_e)=>{var $e=ua(),Ve=p($e),Ye=p(Ve),ct=p(Ye),dt=g(p(ct)),Bt=p(dt);A(Bt,()=>l(m).finished_at,C=>{var w=O();z(()=>B(w,`(time: ${xe(l(m).created_at,l(m).finished_at)??""})`)),f(C,w)},C=>{var w=O("-");f(C,w)}),h(dt),h(ct),h(Ye);var W=g(Ye,2);A(W,()=>l(m).task_input,C=>{var w=Jr(),L=g(p(w),2),Z=p(L,!0);z(()=>B(Z,typeof l(m).task_input=="object"&&"str"in l(m).task_input?l(m).task_input.str:JSON.stringify(l(m).task_input,null,2))),h(L),h(w),f(C,w)});var we=g(W,2);A(we,()=>l(m).task_output,C=>{var w=Xr(),L=p(w),Z=g(p(L),2),X=p(Z),N=p(X);Ss(N,{id:"output-markdown",get checked(){return l(x)},set checked(R){G(x,R)},$$legacy:!0});var D=g(N,2);Nt(D,{for:"output-markdown",class:"text-sm",children:(R,P)=>{U();var Y=O("Markdown");f(R,Y)},$$slots:{default:!0}}),h(X);var F=g(X,2);Ze(F,{variant:"outline",size:"sm",class:"text-sm bg-gray-200 hover:bg-gray-300 dark:hover:bg-gray-700 transition-colors",$$events:{click:()=>{const R=l(a).project.id,P=l(m).challenge_id;vs(`/compare#${R}/c:${P}`)}},children:(R,P)=>{U();var Y=O("Cross-Compare");f(R,Y)},$$slots:{default:!0}}),h(Z),h(L);var V=g(L,2),j=p(V);A(j,()=>l(x),R=>{var P=Ur(),Y=p(P);xs(Y,()=>I(typeof l(m).task_output=="object"&&"str"in l(m).task_output?l(m).task_output.str:JSON.stringify(l(m).task_output,null,2))),h(P),f(R,P)},R=>{var P=Wr(),Y=p(P,!0);z(()=>B(Y,typeof l(m).task_output=="object"&&"str"in l(m).task_output?l(m).task_output.str:JSON.stringify(l(m).task_output,null,2))),h(P),f(R,P)}),h(V),h(w),f(C,w)});var J=g(we,2);A(J,()=>l(m).error,C=>{var w=Vr(),L=g(p(w),2),Z=p(L,!0);h(L),h(w),z(()=>B(Z,l(m).error)),f(C,w)});var de=g(J,2);A(de,()=>l(m).task_details,C=>{var w=Kr(),L=g(p(w),2);tt(L,5,()=>Object.entries(l(m).task_details),st,(Z,X)=>{let N=()=>l(X)[0],D=()=>l(X)[1];var F=he(),V=H(F);A(V,()=>N()!=="prompt",j=>{var R=Yr(),P=p(R),Y=p(P,!0);h(P);var te=g(P,2),ve=p(te,!0);z(()=>B(ve,typeof D()=="string"?D():JSON.stringify(D(),null,2))),h(te),h(R),z(()=>B(Y,N())),f(j,R)}),f(Z,F)}),h(L),h(w),f(C,w)});var ye=g(de,2);A(ye,()=>{var C;return(C=l(m).task_details)==null?void 0:C.prompt},C=>{var w=sa(),L=g(p(w),2),Z=p(L),X=g(p(Z),2),N=p(X);Ss(N,{id:"prompt-markdown",get checked(){return l(v)},set checked(j){G(v,j)},$$legacy:!0});var D=g(N,2);Nt(D,{for:"prompt-markdown",class:"text-sm",children:(j,R)=>{U();var P=O("Markdown");f(j,P)},$$slots:{default:!0}}),h(X),h(Z);var F=g(Z,2),V=p(F);A(V,()=>l(v),j=>{var R=ea(),P=p(R);xs(P,()=>I(typeof l(m).task_details.prompt=="string"?l(m).task_details.prompt:JSON.stringify(l(m).task_details.prompt,null,2))),h(R),f(j,R)},j=>{var R=ta(),P=p(R,!0);z(()=>B(P,typeof l(m).task_details.prompt=="string"?l(m).task_details.prompt:JSON.stringify(l(m).task_details.prompt,null,2))),h(R),f(j,R)}),h(F),h(L),h(w),f(C,w)});var Ce=g(ye,2);A(Ce,()=>l(m).task_logs,C=>{var w=ra(),L=g(p(w),2),Z=g(p(L),2),X=g(p(Z));tt(X,5,()=>l(m).task_logs.logs,st,(N,D)=>{var F=na(),V=p(F),j=p(V),R=p(j,!0);h(j);var P=g(j,2),Y=p(P,!0);z(()=>B(Y,new Date(l(D).timestamp*1e3).toLocaleString())),h(P),h(V);var te=g(V),ve=p(te,!0);h(te),h(F),z(()=>{B(R,l(D).level),B(ve,l(D).message)}),f(N,F)}),h(X),h(Z),h(L),h(w),f(C,w)}),h(Ve);var xt=g(Ve,2),Se=p(xt),Re=p(Se),Ke=g(p(Re)),qt=p(Ke);A(qt,()=>l(m).evaluated_at,C=>{var w=O();z(()=>B(w,`(time: ${xe(l(m).executed_at,l(m).evaluated_at)??""})`)),f(C,w)},C=>{var w=O("-");f(C,w)}),h(Ke),h(Re);var ut=g(Re,2),Oe=p(ut),Dt=p(Oe);z(()=>B(Dt,`Score: ${(l(m).eval_score*100).toFixed(0)??""}%`)),h(Oe);var bt=g(Oe,2),Qs=p(bt,!0);h(bt);var Js=g(bt,2);Ze(Js,{variant:"primary",size:"sm",class:"flex items-center gap-2 text-sm transition-colors",$$events:{click:()=>He(l(m))},children:(C,w)=>{var L=aa(),Z=H(L);jn(Z,{class:"h-3 w-3"}),U(),f(C,L)},$$slots:{default:!0}}),h(ut),h(Se);var ss=g(Se,2);A(ss,()=>{var C;return(C=l(m).eval_details)==null?void 0:C.evaluations},C=>{var w=oa(),L=p(w),Z=g(p(L),2);A(Z,()=>l(m).eval_details.evaluations.some(N=>N.score>=1)&&l(m).eval_details.evaluations.some(N=>N.score<1)||l(S)!="",N=>{var D=ia(),F=p(D),V=ue(()=>l(S)===""?"bg-gray-100 border-gray-200":"");Ze(F,{variant:"outline",size:"sm",get class(){return l(V)},$$events:{click:()=>G(S,"")},children:(te,ve)=>{U();var Me=O("All");f(te,Me)},$$slots:{default:!0}});var j=g(F,2),R=ue(()=>l(S)==="passed"?"bg-green-50 border-green-200 text-green-700":"");Ze(j,{variant:"outline",size:"sm",get class(){return l(R)},$$events:{click:()=>G(S,"passed")},children:(te,ve)=>{U();var Me=O("Passed");f(te,Me)},$$slots:{default:!0}});var P=g(j,2),Y=ue(()=>l(S)==="failed"?"bg-red-50 border-red-200 text-red-700":"");Ze(P,{variant:"outline",size:"sm",get class(){return l(Y)},$$events:{click:()=>G(S,"failed")},children:(te,ve)=>{U();var Me=O("Failed");f(te,Me)},$$slots:{default:!0}}),h(D),f(N,D)}),h(L);var X=g(L,2);tt(X,5,()=>l(m).eval_details.evaluations.filter(N=>l(S)===""||l(S)==="passed"&&N.score>=1||l(S)==="failed"&&N.score<1),st,(N,D)=>{var F=la(),V=p(F),j=p(V),R=p(j),P=p(R);z(()=>B(P,`${(l(D).score*100).toFixed(0)??""}%`)),h(R),h(j);var Y=g(j,2),te=p(Y,!0);h(Y),h(V);var ve=g(V,2),Me=p(ve,!0);h(ve),h(F),z(()=>{kt(j,`flex-none flex items-center justify-center w-9 h-9 rounded-full border
                                                                                ${(l(D).score>=1?"status-completed status-completed-border":l(D).score>0?"status-default status-default-border":"status-failed status-failed-border")??""}`),B(te,l(D).criterion),B(Me,l(D).rationale)}),f(N,F)}),h(X),h(w),f(C,w)});var Us=g(ss,2);A(Us,()=>l(m).eval_details,C=>{var w=da(),L=g(p(w),2);tt(L,5,()=>Object.entries(l(m).eval_details),st,(Z,X)=>{let N=()=>l(X)[0],D=()=>l(X)[1];var F=he(),V=H(F);A(V,()=>N()!=="evaluations",j=>{var R=ca(),P=p(R),Y=p(P,!0);h(P);var te=g(P,2),ve=p(te,!0);z(()=>B(ve,typeof D()=="string"?D():JSON.stringify(D(),null,2))),h(te),h(R),z(()=>B(Y,N())),f(j,R)}),f(Z,F)}),h(L),h(w),f(C,w)}),h(xt),h($e),z(()=>{kt(bt,`px-4 py-1 rounded-lg font-semibold
                                                                ${l(m).eval_passed?"status-completed":"status-failed"}`),B(Qs,l(m).eval_passed?"PASSED":"FAILED")}),f(T,$e)},$$slots:{default:!0}})},$$slots:{default:!0}})}),f(De,Pe)}),f(Je,Ue)},$$slots:{default:!0}}),f(Et,lt)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),h(it),f(zt,it)},zt=>{var it=ga();f(zt,it)},!0),f(qe,es)},!0),f($,Q)}),h(le),f(u,le),at()}export{qa as component};
